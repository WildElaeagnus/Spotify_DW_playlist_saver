Spotify_DW_playlist_saver
===
 Сохраняет плейлист еженедельных рекомендаций Spotify с учетом не понравившихся треков.

Зачем 
--- 
 Каждую неделю поейлист рекомнедациий обновляется и отметки пользователя о непонравившихся треках удаляются. Этра программа позоволяет сохранить плейлист сформировавшийся из плейлиста рекомендаций. 
 ![image](https://user-images.githubusercontent.com/54314123/132143250-be86711c-0662-4cf0-9106-cb65e718257f.png)



Установка
---
1. Убедитесь что python3 установлен.
1. Используйте `pip install -r requirements.txt` для установки
    необходимых библиотек для python.
1. Настройте поля в фйале `auth_info.txt`


### Настройка фйала `auth_info.txt`
- Поле `user_id:` можно заполнить перейдя на страницу своего [профиля](https://www.spotify.com/ru-ru/account/overview/?utm_source=spotify&utm_medium=menu&utm_campaign=your_account) и скопировав поле **user name**
- Получение токена вручную
	- Поле `token_manual:` нужо заполянить если вы хотите вручную получить token. Это можно сделать по [ссылке](https://developer.spotify.com/console/get-album/), разрешения находятся в файле `permissons.py`
- Получение токена при помощи автоматизированного браузера
	- Поле `browser_profile_path: ` это путь к профилю браузера (если вы используйте firefox то его можно найти по адресу [about:profiles](about:profiles) в разделе **Root Directory**). Используйте любой профиль  браузера в котором в котором зарегистриррован ваш аккаунт Spotify.
	- Поле `webdriver_exec_path: `это путь к вэбдрайверу, для firefox его можно скачать [тут](https://github.com/mozilla/geckodriver/releases/tag/v0.29.1).
	- Поле `firefox_binary_path: ` это путь к исполняемому файлу исполуемого браузера (например **C:\\Program Files\\Mozilla Firefox\\firefox.exe**)
	- Поле `web_browser: `  позволяет выбрать между браузером `chrome` или `firefox`по умолчанию будет выбран `firefox`.
- Поле `save_full_playlist:` 
`True` если в плейлисте есть все 30 песен, он будет сохранен
по умолчанию параметр равен `False`
- Поле `publisity: ` отвечает для доступность созданного плейлиста для других полльзователей. Может быть `public` / `private` по умолчанию `public`
- Поле `fav_device_name:` имя предпочитаемого устройства с которого будет воспроизводиться плейлист. По умолчанию будет использовано первое активное устройство.


Как использовать
---

### Для запуска вручную

   Запустите файл `Spotify_DW_playlist_saver.pyw`

### Запуск по расписанию
- Использование **SDWPS_sсheduler.pyw** 
	1.  Настройте файл конфигурации **sheduler_config.txt**.
		Пример:

			[Sсheduler_config]
			period: weekly, Su, 20:00
			skript_name_py: Spotify_DW_playlist_saver.pyw 
	

	- Воможные опции для поля `period: ` hourly, daily, weekly, monthly
		
	2. Добавьте файл **SDWPS_sсheduler.pyw** в автозагрузку.
	- Время до выполнения скрипта можно узнать при помощи команды `python sсheduler.pyw time` скрипт при этом не будет исполнен.

- Запуск при помощи планировщика заданий Windows [ссылка](https://remontka.pro/windows-task-scheduler/)
- Запуск при помощи cron (Linux) [ссылка](https://www.nic.ru/help/planirovshik-cron-zapusk-programm-po-raspisaniyu_6791.html)




Как это работает
---
&nbsp;&nbsp;&nbsp;&nbsp;Посклоьку Spotify API не имеет итрструментария для определения не понравившихся треков в плейлисте рекомендаций то приходится использовать обходной путь.
&nbsp;&nbsp;&nbsp;&nbsp;Метод заключается в то, что программа пытается воспроизвести трек из плейлиста рекомендаций. Если трек не "дизлайкнут" то его возможно проиграть, но если трек "погас", то его воспроизведение не доступно и он не будет включен в сохраненный плейлист. 
&nbsp;&nbsp;&nbsp;&nbsp;Таким образом происходит отбор из 30 треков и только те, которые остались в плейлисте рекомендаций к концу недели будут сохранены программой в новый плейлист.


Лицензия
---
Spotify_DW_playlist_saver бесплатное программное обеспечение с открытым исходным кодом под лицензией [Apache 2.0 License](https://github.com/create-go-app/cli/blob/master/LICENSE).
